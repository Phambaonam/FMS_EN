<!DOCTYPE html> 

{% include '../../components/head.html' %}
<body>
    <!-- Page Wrapper -->
    <div id="page-wrapper">
        <!-- Page Container -->
        <div id="page-container" class="sidebar-partial sidebar-visible-lg sidebar-no-animations">

            <!-- Main Sidebar -->
            <div id="sidebar">
                <!-- Wrapper for scrolling functionality -->
                <div id="sidebar-scroll">
                    <!-- Sidebar Content -->
                    <div class="sidebar-content">
                        <!-- Brand -->
                        <a href="index.html" class="sidebar-brand">
                        <i class="gi gi-home"></i><span class="sidebar-nav-mini-hide"><strong>FMS</strong></span>
                    </a>
                        <!-- END Brand -->

                        <!-- User Info -->
                        {% include '../../components/userInfo.html' %}
                        <!-- END User Info -->

                        <!-- Sidebar Navigation -->
                        <ul class="sidebar-nav">
                            <li>
                                <a href="index.html"><i class="gi gi-stopwatch sidebar-nav-icon"></i><span
                                    class="sidebar-nav-mini-hide">Dashboard</span></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="sidebar-nav-menu" id="category">
                                <i class="fa fa-angle-left sidebar-nav-indicator sidebar-nav-mini-hide"></i>
                                <i class="gi gi-address_book sidebar-nav-icon"></i>
                                <span class="sidebar-nav-mini-hide" >Quán Lý Danh Mục</span>
                                </a>
                                <ul class="category">
                                    <li>
                                        <a href="/admin/category/area">
                                            <!--<i class="gi gi-keys sidebar-nav-icon"></i>-->
                                            Danh Mục Khu Vực
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/admin/category/category">
                                            <!--<i class="gi gi-tags sidebar-nav-icon"></i>-->
                                            Danh Mục
                                        </a>
                                    </li>
                                    <li>
                                        <a href="/admin/category/category_product">
                                            <!--<i class="gi gi-tag sidebar-nav-icon"></i>-->
                                            Danh Mục Sản Phẩm
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="active">
                                <a href="#" class="sidebar-nav-menu" id="product">
                                <i class="fa fa-angle-left sidebar-nav-indicator sidebar-nav-mini-hide"></i>
                                <i class="gi gi-shop sidebar-nav-icon"></i>
                                <span class="sidebar-nav-mini-hide">Quản Lý Sản Phẩm</span>
                            </a>
                                <ul class="product">

                                    <li class="active">
                                        <a href="/admin/product">
                                        Sản Phẩm
                                    </a>
                                    </li>

                                </ul>
                            </li>
                            <li>
                                <a href="#" class="sidebar-nav-menu">
                                <i class="fa fa-angle-left sidebar-nav-indicator sidebar-nav-mini-hide"></i>
                                <i class="gi gi-money sidebar-nav-icon"></i>
                                <span class="sidebar-nav-mini-hide">Quản Lý Đơn Hàng</span>
                            </a>
                                <ul>
                                    <li></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#" class="sidebar-nav-menu">
                                <i class="fa fa-angle-left sidebar-nav-indicator sidebar-nav-mini-hide"></i>
                                <i class="gi gi-group sidebar-nav-icon"></i>
                                <span class="sidebar-nav-mini-hide">Quản Lý Người Dùng</span>
                            </a>
                                <ul>
                                    <li></li>
                                </ul>
                            </li>
                        </ul>
                        <!-- END Sidebar Navigation -->

                    </div>
                    <!-- END Sidebar Content -->
                </div>
                <!-- END Wrapper for scrolling functionality -->
            </div>
            <!-- END Main Sidebar -->

            <!-- Main Container -->
            <div id="main-container">
                <!-- Header -->
                {% include '../../components/header.html' %}
                <!-- END Header -->

                <!-- Page content -->
                <div id="page-content">
                    <div>
                        <h3 style="text-align: center;">Thêm sản phẩm</h3>
                    </div>
                    <div class="page-content-edit">
                            <form action="/admin/product/add_product" id="form1" class="form-horizontal" method="post" enctype="multipart/form-data">
                                    <div class="form-group"></div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Tùy chọn</label>
                                        <div class="col-sm-7">
                                            Sản phẩm cùng loại <input type="checkbox" name="product_same" id="product_same">
                                            Bán giảm giá <input type="checkbox" name="sale_off_price" id="sale_out">
                                            Sản Phẩm mới <input type="checkbox" name="new_product">
                                            Còn hàng <input type="checkbox" name="status_product">
                                        </div>
                                    </div>
                                    <div class="form-group" id="product">
                                        <label class="col-sm-2 control-label">Tên sản phẩm </label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" name="product_name" />
                                        </div>
                                    </div>
                                    <div class="form-group" id="ucp">
                                        <label class="col-sm-2 control-label">Mã sản phẩm </label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" name="ucp_product" />
                                        </div>
                                    </div>
                                    <div class="form-group" id="belong_category">
                                        <label class="col-sm-2 control-label">Thuộc danh mục</label>
                                        <div class="col-sm-7">
                                            <select class="form-control selectpicker" multiple title="Chọn một danh mục" data-max-options="1" name="name_category">
                                                {% for categoryProduct in categoryProducts%}
                                                <option value="{{ categoryProduct.name_category_product }}">{{ categoryProduct.name_category_product | title }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Giá Gốc</label>
                                        <div class="col-sm-7">
                                            <input id="original_price" type="text" class="form-control" name="original_price" />
                                        </div>
                                    </div>

                                    <div class="form-group" id="sale_out_price" style="display:none">
                                        <label class="col-sm-2 control-label">Khuyến mại (%)</label>
                                        <div class="col-sm-7">
                                             <input id="sale_off_price" type="text" class="form-control" name="sale_out_price" />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Giá bán ra</label>
                                        <div class="col-sm-7">
                                            <input id="product_price" type="text" class="form-control" name="product_price" />
                                        </div>
                                    </div>
                                       
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Miêu tả</label>
                                        <div class="col-sm-7">
                                            <textarea rows="6" class="form-control" name="description" placeholder="Mô tả cho sản phẩm..."></textarea>
                                        </div>
                                    </div>

                                     <div class="form-group">
                                        <label class="col-sm-2 control-label">Ảnh</label>
                                        <div class="col-sm-7">
                                            <div id="file_count"></div>
                                            <div class="upload">
                                                <input type="file" name="photos" multiple id="gallery-photo-add" >
                                            </div> 
                                            <div class="gallery"></div> 
                                        </div> 
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Ngày tạo</label>
                                        <div class="col-sm-7">
                                            <div class='input-group date' id='datetimepicker1'>
                                                <input type='text' class="form-control" name="time_create" />
                                                <span class="input-group-addon">
                                                    <span class="fa fa-calendar"></span>
                                                </span>
                                            </div>
                                        </div>    
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Thông tin</label><br>
                                        <div class="col-sm-7">
                                            <table style="width:65%" class="attr">
                                                <tr>
                                                    <th>Nhà sản xuất</th>
                                                    <td>
                                                        <input type="text" class="form-control" name="manufacturer" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>Chất liệu</th>
                                                    <td>
                                                         <input type="text" class="form-control" name="material" />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th>Màu sắc</th>
                                                    <td>
                                                        <input type="text" class="form-control" name="color" />
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Thông số</label><br>
                                        <div class="col-sm-7">
                                            <table style="width:65%" class="attr">
                                                    <tr>
                                                        <th>Chiều dài:</th>
                                                         <td>
                                                            <input type="text" class="form-control" name="length">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th>Chiều ngang</th>
                                                        <td> <input type="text" class="form-control" name="width"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Chiều cao</th>
                                                        <td> <input type="text" class="form-control" name="hight"></td>
                                                    </tr>
                                                    <tr>
                                                        <th>Đường kính</th>
                                                        <td> <input type="text" class="form-control" name="diameter"></td>
                                                    </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-2 control-label">Số lượng</label>
                                        <div class="col-sm-7">
                                            <input type="text" class="form-control" name="total">
                                        </div>
                                    </div>
                                <div class="form-group save">
                                    <div class="col-md-4"></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-3">
                                        <a href="" class="btn btn-danger m-r-10 m-t-10"><i class="fa fa-times"></i> Hủy Bỏ</a>
                                        <button class="btn btn-success m-t-10" type="submit"><i class="fa fa-check"></i> Lưu Thông Tin</button>
                                    </div>
                                </div>
                            </form>                       
                    </div>
                </div>
                <!-- END Page Content -->
            </div>
            <!-- END Main Container -->
        </div>
        <!-- END Page Container -->
    </div>
    <!-- END Page Wrapper -->

    {% include '../../components/footer.html' %} 
    {% include '../../components/script.html' %}
    <script>
    var click = 1
    var temp = 1 
    $('#product_same').click(function () {   
        if (click === 1) {
            $('div#product').css('display','none')
            $('div#belong_category').css('display','none')
            click--
            return 1
        }
        if(click === 0) {
            click++
            $('div#product').css('display','block')
            $('div#belong_category').css('display','block')
            return 1
        }        
    })

    $('#sale_out').click(function () {   

        if (temp === 1) {
            $('div#sale_out_price').css('display','block')
            $('#sale_off_price').on('keydown keyup', function() {
                var input = parseInt($('#original_price').val())/100;
                $('#product_price').val(input*100-($(this).val()*input));
            })
            temp--
            return 1
        }
        if(temp === 0) {
            temp++
            $('#product_price').val('')
            $('div#sale_out_price').css('display','none')
            return 1
        }        
    })

    var fileCount = 0;

    var showFileCount = function() {
        $('#file_count').text('Files selected: ' + fileCount);
    };

    $(function() {
        var count = 1;
        // Multiple images preview in browser
        var imagesPreview = function(input, placeToInsertImagePreview) {
            if (input.files) {
                var files = $('#gallery-photo-add')[0].files;
                var filesAmount = input.files.length;
                for (i = 0; i < filesAmount; i++) {
                    var reader = new FileReader();
                    reader.onload = function(event) {
                        $($.parseHTML('<img>'))
                        .addClass('img images' + count)
                        .attr('src', event.target.result)
                        .appendTo(placeToInsertImagePreview);

                        $($.parseHTML('<span>')).attr({
                            'class': 'remove_img_preview remove_img_preview' + count,
                            'remove': count
                        })
                        .appendTo(placeToInsertImagePreview);
                        count ++
                    }
                    reader.readAsDataURL(input.files[i]);
                }
                fileCount += files.length;
                showFileCount()
            }

        };
        $('#gallery-photo-add').on('change', function() {
            imagesPreview(this, 'div.gallery');
        });
    });

    $(document).ready(function() {
        $(document).on('click', '.remove_img_preview', function(){
            var count = $(this).attr('remove')
            var img = '.images' + count
            var rm = ".remove_img_preview" + count
            $(img).remove()
            $(rm).remove()
            fileCount -= 1;
            showFileCount();
        });
    });
// https://stackoverflow.com/questions/42116909/show-remaining-file-count-when-removing-files-on-multiple-file-upload    
</script>
</body>

</html>